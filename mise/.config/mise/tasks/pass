#!/bin/zsh
# mise hide=true
# mise.description=Access a password from the kdbx database

source $CONFIGS_DIR/commands.sh

pw=$(security find-generic-password -ws "$KEY_DATABASE_URL")

if [ "$pw" != "" ]
then
    list=$(key --password="$pw" list)

    if [ "$list" != "" ]
    then
        name=$(echo "$list" | gum filter)
        key --password="$pw" get "$name"
    fi
fi
